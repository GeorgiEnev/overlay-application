<Window xmlns="https://github.com/avaloniaui"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		x:Class="Overlay.App.MainWindow"
		KeyDown="OnKeyDown"
		Focusable="True"

		TransparencyLevelHint="Transparent"
		Background="Transparent"

		ExtendClientAreaToDecorationsHint="True"
		ExtendClientAreaChromeHints="NoChrome"

		WindowState="Maximized"
		CanResize="False"
		Topmost="True"
		ShowInTaskbar="False">

	<Grid>

		<!-- Drawing Canvas -->
		<Canvas x:Name="DrawCanvas"
				Background="Transparent"
				IsHitTestVisible="True"/>

		<!-- Toolbar -->
		<Border x:Name="ToolBar"
				HorizontalAlignment="Center"
				VerticalAlignment="Top"
				Margin="0,20,0,0"
				Background="#A9A9A9"
				BorderBrush="#818589"
				BorderThickness="1"
				CornerRadius="10"
				Padding="12">

			<StackPanel Orientation="Horizontal" Spacing="8">

				<!-- Color picker button -->
				<Button x:Name="ColorButton"
						Content="🎨"
						Width="32"
						Height="32"
						Background="#2D2D2D"
						Foreground="White"
						BorderBrush="#555"
						CornerRadius="6"
						Click="ToggleColorPopup"/>

				<!-- Decrease Brush Size -->
				<Button Content="-"
						Width="32"
						Background="#2D2D2D"
						Foreground="DarkGray"
						BorderBrush="#555"
						CornerRadius="6"
						Click="DecreaseBrushSize"/>

				<!-- Brush Size Input -->
				<TextBox x:Name="BrushSizeInput"
						 Width="50"
						 Text="2"
						 HorizontalContentAlignment="Center"
						 VerticalContentAlignment="Center"
						 Background="#2D2D2D"
						 Foreground="DarkGray"
						 BorderBrush="#555"
						 CornerRadius="6"
						 KeyDown="OnBrushSizeInputKeyDown"
						 LostFocus="OnBrushSizeInputChanged"/>

				<!-- Increase Brush Size -->
				<Button Content="+"
						Width="32"
						Background="#2D2D2D"
						Foreground="DarkGray"
						BorderBrush="#555"
						CornerRadius="6"
						Click="IncreaseBrushSize"/>

			</StackPanel>
		</Border>

		<!-- Color Picker Popup -->
		<Popup x:Name="ColorPopup"
			   PlacementTarget="{Binding #ColorButton}"
			   Placement="Bottom">

			<Border Background="#2D2D2D"
					BorderBrush="#555"
					BorderThickness="1"
					CornerRadius="8"
					Padding="8">

				<StackPanel Orientation="Horizontal" Spacing="12">

					<Canvas Width="180" Height="180">

						<!-- Color square -->
						<Image x:Name="ColorPickerImage"
							   Stretch="Fill"
							   PointerPressed="OnColorPickerPressed"
							   PointerMoved="OnColorPickerMoved"
							   PointerReleased="OnColorPickerReleased"/>

						<!-- Selection dot -->
						<Ellipse x:Name="ColorPickerDot"
								 Width="10"
								 Height="10"
								 Stroke="White"
								 StrokeThickness="2"
								 Fill="Transparent"
								 IsHitTestVisible="False"/>
					</Canvas>

					<!-- Hue slider -->
					<Slider x:Name="HueSlider"
							Orientation="Vertical"
							Width="18"
							Minimum="0"
							Maximum="360"
							Value="0"
							ValueChanged="OnHueChanged"/>

				</StackPanel>

			</Border>

		</Popup>

	</Grid>

</Window>
